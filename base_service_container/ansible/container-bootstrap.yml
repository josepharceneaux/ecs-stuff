- name: Bootstrap gettalent/base_service_container image
  hosts: local
#  vars:
#    project_path: /root/base_service_container
#    project_requirements: requirements.txt
  tasks:
    - name: update core libs
      apt: update_cache=yes
    - name: install basic packages
      apt: pkg={{ item }} update_cache=yes
      with_items:
        - curl
        - wget
        - build-essential
        - gcc
        - make
        - zlib1g-dev
        - libbz2-dev
        - libmysqlclient-dev
        - libreadline-dev
        - libxml2-dev
        - libxslt-dev
        - libssl-dev
        - nginx
        - git
    - name: install Python and Basic Tools
      apt: pkg={{ item }} update_cache=yes
      with_items:
        - python
        - python-dev
        - python-distribute
        - python-pip
        - python-setuptools
        - software-properties-common
        - python-software-properties
#    - name: install requirements.txt
#      pip: requirements="{{ project_path }}/{{ project_requirements }}"


# TODO uncomment once this issue is resolved: https://github.com/dirn/ansible-pyenv/issues/1
#- name: Install python 2.7.9 in pyenv
#  hosts: local
#  roles:
#    - role: dirn.pyenv
#      pyenv_virtualenv: false
#      pyenv_runcom: ~/.bashrc
#      pyenv_versions:
#        - 2.7.9
#      pyenv_default_versions:
#        - 2.7.9
#      pyenv_project_versions:
#        - 2.7.9
